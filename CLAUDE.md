# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Pomodoro timer desktop app built with **Wails v2** (Go backend + React/TypeScript frontend). Uses a translucent/acrylic window style.

## Commands

```bash
# Development (live reload)
wails dev -tags webkit2_41

# Build for Windows
wails build -tags webkit2_41 -platform=windows

# Frontend dependencies (uses bun, configured in wails.json)
cd frontend && bun install
```

The `-tags webkit2_41` flag is required on Linux for WebKit compatibility.

## Architecture

### Backend (Go)

All Go files are in the root directory under `package main`. Structs are bound to the frontend via `wails.Run()` in `main.go`:

- **`app.go`** - Base App struct with startup lifecycle hook
- **`clock.go`** - Timer engine: manages sessions (start/stop), tracks the current position in the pomodoro cycle, and formats remaining time as `MM:SS` strings
- **`Settings.go`** - Pomodoro configuration: work (20min), short rest (5min), long rest (15min), and the cycle pattern (4 work sessions with short rests, ending with a long rest)
- **`Tasks.go`** - In-memory CRUD task list

`Clock` depends on `Settings` (passed at construction). The `settings` package-level var in `clock.go` holds the active settings instance.

### Frontend (React + TypeScript)

Source lives in `frontend/src/`. Uses Tailwind CSS v4 (via `@tailwindcss/vite` plugin) and Vite.

- **`pages/Clock.tsx`** - Main view. Clicking the screen toggles timer start/stop. Polls Go backend every second for remaining time via `setInterval`.
- **`hooks/useClock.ts`**, **`hooks/useSettings.ts`** - Thin wrappers around Wails-generated Go bindings
- **`components/CustomPanel.tsx`** - Absolute-positioned side panel container
- **`components/Tasks.tsx`** - Task list UI (stub)

### Wails Bindings

`frontend/wailsjs/` contains auto-generated TypeScript bindings for Go methods. These are regenerated by `wails dev`/`wails build` whenever bound Go structs change. Import Go functions from `wailsjs/go/main/<StructName>` and models from `wailsjs/go/models`.

### Frontend-Backend Communication

The frontend calls Go methods directly through the generated bindings (no REST API). Each exported method on a bound Go struct becomes an async TypeScript function. Time values from Go arrive as `time.Duration` integers (nanoseconds).
